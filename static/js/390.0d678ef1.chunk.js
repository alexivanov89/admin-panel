"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[390],{7154:function(e,n,r){r.d(n,{E:function(){return o}});var a=r(1413),i=r(9439),l=r(5987),t=r(2791),s=r(184),c=["fallback","src","alt"],o=function(e){var n=e.fallback,r=e.src,o=e.alt,d=(0,l.Z)(e,c),u=(0,t.useState)(r),m=(0,i.Z)(u,2),f=m[0],h=m[1];(0,t.useEffect)((function(){h(r)}),[r]);return(0,s.jsx)("img",(0,a.Z)({src:f||n,alt:o,onError:function(){return h(n)}},d))}},390:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var a=r(1413),i=r(3433),l=r(5861),t=r(9439),s=r(7757),c=r.n(s),o=r(2791),d=r(5485),u=r(9389),m=r(570),f=r(3695),h=r(8054),p=r(6106),v=r(914),g=r(3099),x=r(7309),_=r(7063),Z=r(8817),j=r(3734),I=r(2014),b=r(8243),N=r(9286),P=r(4564),C=r(1333),y=r(6030),S=r(2311),E=r(606),F=r(8168),B={container:"EditPage_container__H1Sxw",cardInfo:"EditPage_cardInfo__Z71iu",cardSettings:"EditPage_cardSettings__W+W15",cardInfoHeader:"EditPage_cardInfoHeader__Ivr+U",cardInfoBody:"EditPage_cardInfoBody__rmFw9",cardInfoFooter:"EditPage_cardInfoFooter__534lY",cardSettingsHeader:"EditPage_cardSettingsHeader__dGSpf",cardSettingsBody:"EditPage_cardSettingsBody__LEk2P",divider:"EditPage_divider__ZvXJM"},k=r(184),w=function(e){var n=e.title,r=e.cardInfo,a=e.cardSettings,i=e.buttons,l=d.Z.Title;(0,y.I0)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l,{className:B.title,children:n}),(0,k.jsxs)("div",{className:B.container,children:[(0,k.jsxs)(P.Z,{bordered:!1,className:B.cardInfo,children:[(0,k.jsx)(P.Z.Grid,{hoverable:!1,className:B.cardInfoHeader,children:r.header}),(0,k.jsx)(C.Z,{className:B.divider}),(0,k.jsx)(P.Z.Grid,{hoverable:!1,className:B.cardInfoBody,children:r.body}),(0,k.jsx)(C.Z,{className:B.divider}),(0,k.jsx)(P.Z.Grid,{hoverable:!1,className:B.cardInfoFooter,children:r.footer})]}),(0,k.jsxs)(P.Z,{bordered:!1,className:B.cardSettings,bodyStyle:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,k.jsx)(P.Z.Grid,{hoverable:!1,className:B.cardSettingsHeader,children:a.header}),(0,k.jsxs)(P.Z.Grid,{hoverable:!1,className:B.cardSettingsBody,children:[a.body,i]})]})]})]})},M=r(7154),V=r(9538),G={cardInfoResult:"CarEditPage_cardInfoResult__NEBgZ",carImage:"CarEditPage_carImage__bXBZU",wrapperUpload:"CarEditPage_wrapperUpload__ohFeG",uploadBtn:"CarEditPage_uploadBtn__zq+VV",placeholder:"CarEditPage_placeholder__hf652",upload:"CarEditPage_upload__SZ++d",cardInfoTitle:"CarEditPage_cardInfoTitle__+DJUc",cardInfoProgress:"CarEditPage_cardInfoProgress__Xkdad",progressTitle:"CarEditPage_progressTitle__AXUGR",progressValue:"CarEditPage_progressValue__W-ss4",cardInfoSpace:"CarEditPage_cardInfoSpace__skTY9",cardInfoDescription:"CarEditPage_cardInfoDescription__4QVky",cardSettingsHeader:"CarEditPage_cardSettingsHeader__n74d-",checkboxGroup:"CarEditPage_checkboxGroup__kbTU-",checkbox:"CarEditPage_checkbox__ae31p",input:"CarEditPage_input__ZGAWm",plusBtn:"CarEditPage_plusBtn__SWySq",inputNumber:"CarEditPage_inputNumber__tqEpt",select:"CarEditPage_select__ywb2r",form:"CarEditPage_form__R9cb2",saveBtn:"CarEditPage_saveBtn__Q1B-S",createBtn:"CarEditPage_createBtn__rrGni",cancelBtn:"CarEditPage_cancelBtn__9hsjS",deleteBtn:"CarEditPage_deleteBtn__WBnBi",groupBtnRight:"CarEditPage_groupBtnRight__9gSXy"},T=r(2784),L=function(){var e=d.Z.Text,n=u.Z.TextArea,r=m.Z.useForm(),s=(0,t.Z)(r,1)[0],P=(0,y.I0)(),C=(0,y.v9)((function(e){return e.percentFillFields})).percent,B=(0,y.v9)((function(e){return e.table})),L=B.category.categories,R=B.car.cars,q=R,z=L,H=(0,o.useState)({name:null,categoryId:null,colors:[],priceMin:null,priceMax:null,description:null,thumbnail:null}),U=(0,t.Z)(H,2),D=U[0],O=U[1],A=(0,o.useState)(null),W=(0,t.Z)(A,2),X=W[0],J=W[1],K=(0,o.useState)(!1),Q=(0,t.Z)(K,2),Y=Q[0],$=Q[1],ee=(0,o.useState)(null),ne=(0,t.Z)(ee,2),re=ne[0],ae=ne[1],ie=(0,o.useState)([]),le=(0,t.Z)(ie,2),te=le[0],se=le[1],ce=(0,o.useState)(null),oe=(0,t.Z)(ce,2),de=oe[0],ue=oe[1],me=(0,o.useState)(null),fe=(0,t.Z)(me,2),he=fe[0],pe=fe[1],ve=[{label:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439",value:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{label:"\u0411\u0435\u043b\u044b\u0439",value:"\u0411\u0435\u043b\u044b\u0439"},{label:"\u0427\u0435\u0440\u043d\u044b\u0439",value:"\u0427\u0435\u0440\u043d\u044b\u0439"}],ge=(0,o.useState)(ve),xe=(0,t.Z)(ge,2),_e=xe[0],Ze=xe[1],je=new FormData,Ie=(0,o.useState)(null),be=(0,t.Z)(Ie,2),Ne=be[0],Pe=be[1],Ce=function(e){return new Promise((function(n,r){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return n(a.result)},a.onerror=function(e){return r(e)}}))},ye={action:"http://localhost:3000",onRemove:function(e){se((function(n){var r=n.indexOf(e),a=n.slice();return a.splice(r,1),ue(null),a}))},beforeUpload:function(e){var n=e.type.includes("image");return n||f.ZP.error("".concat(e.name," \u043d\u0435 img-\u0444\u0430\u0439\u043b.")),n||h.Z.LIST_IGNORE},onChange:function(){var e=(0,l.Z)(c().mark((function e(n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.file.status,"done"!==n.file.status){e.next=10;break}if(n.file.url||n.file.preview){e.next=6;break}return e.next=5,Ce(n.file.originFileObj);case 5:n.file.preview=e.sent;case 6:ue(n.file),f.ZP.success("".concat(n.file.name," \u0444\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d.")),e.next=11;break;case 10:"error"===n.file.status&&f.ZP.error("\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430 ".concat(n.file.name," \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430."));case 11:r=(r=(r=(0,i.Z)(n.fileList)).slice(-1)).map((function(e){return e.response&&(e.url=e.response.url),e})),se(r),r.forEach((function(e){je.append("file",e)}));case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fileList:te};(0,o.useEffect)((function(){P((0,F.uT)()),P((0,F.LS)())}),[]);var Se=(0,k.jsxs)(p.Z,{children:[(0,k.jsx)(v.Z,{span:12,children:(0,k.jsx)(m.Z.Item,{children:(0,k.jsxs)(g.Z,{size:12.5,wrap:!0,children:[(0,k.jsx)(x.Z,{type:"primary",htmlType:"submit",className:G.saveBtn,disabled:!X||Y,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,k.jsx)(x.Z,{className:G.cancelBtn,onClick:function(){s.resetFields()},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})}),(0,k.jsx)(v.Z,{span:12,className:G.groupBtnRight,children:(0,k.jsxs)(g.Z,{size:12.5,wrap:!0,children:[(0,k.jsx)(x.Z,{className:G.createBtn,onClick:function(){s.validateFields().then((function(e){if(Object.keys(e).includes("thumbnail")){var n={priceMin:s.getFieldValue("priceMin"),priceMax:s.getFieldValue("priceMax"),name:s.getFieldValue("name"),description:s.getFieldValue("description"),colors:s.getFieldValue("colors"),categoryId:L.find((function(e){return e.id===s.getFieldValue("categoryId")})),thumbnail:{path:null===de||void 0===de?void 0:de.preview,size:null===de||void 0===de?void 0:de.size,originalname:null===de||void 0===de?void 0:de.name,mimetype:null===de||void 0===de?void 0:de.type}};S.o.postCar(n).then((function(){s.resetFields()})).then((function(){f.ZP.success("\u041c\u0430\u0448\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430."),P((0,F.LS)())})).catch((function(){return f.ZP.error("\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043c\u0430\u0448\u0438\u043d\u044b  \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.")}))}})).catch((function(e){}))},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),(0,k.jsx)(m.Z.Item,{children:(0,k.jsx)(x.Z,{className:G.deleteBtn,onClick:function(){s.validateFields().then((function(e){S.o.deleteCarById(X).then((function(){s.resetFields()})).then((function(){f.ZP.success("\u041c\u0430\u0448\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430."),J(null),P((0,F.LS)())})).catch((function(){return f.ZP.error("\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043c\u0430\u0448\u0438\u043d\u044b  \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.")}))})).catch((function(e){}))},disabled:!X||Y,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})})]});return(0,o.useEffect)((function(){s.setFieldsValue(D)}),[D]),(0,k.jsx)(m.Z,{name:"form",layout:"vertical",initialValues:D,autoComplete:"off",requiredMark:!1,className:G.form,form:s,onFinish:function(){s.validateFields().then((function(e){if(Object.keys(e).includes("thumbnail")){var n={priceMin:s.getFieldValue("priceMin"),priceMax:s.getFieldValue("priceMax"),name:s.getFieldValue("name"),description:s.getFieldValue("description"),colors:s.getFieldValue("colors"),categoryId:L.find((function(e){return e.id===s.getFieldValue("categoryId")})),thumbnail:{path:null===de||void 0===de?void 0:de.preview,size:null===de||void 0===de?void 0:de.size,originalname:null===de||void 0===de?void 0:de.name,mimetype:null===de||void 0===de?void 0:de.type}};S.o.putCarById(X,n).then((function(){s.resetFields()})).then((function(){f.ZP.success("\u041c\u0430\u0448\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430."),P((0,F.LS)())})).catch((function(){return f.ZP.error("\u041f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043c\u0430\u0448\u0438\u043d\u044b  \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.")}))}})).catch((function(e){}))},onFieldsChange:function(e,n){P((0,E.H)(function(e){var n=e.length,r=e.filter((function(e){var n=e.value;return Array.isArray(n)?n.length>0:Boolean(n)})).length;return Math.round(100*r/n)}(n)))},children:(0,k.jsx)(w,{title:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",buttons:Se,cardInfo:{header:(0,k.jsx)(_.ZP,{icon:(0,k.jsx)("div",{className:G.carImage,children:(0,k.jsx)(M.E,{src:null===de||void 0===de?void 0:de.preview,alt:null===de||void 0===de?void 0:de.name,fallback:V,loading:"lazy"})}),title:D.name||re?D.name||re:null,subTitle:Ne,extra:(0,k.jsx)(m.Z.Item,{name:"thumbnail",rules:[{required:!0,message:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435!"}],className:G.formItem,children:(0,k.jsxs)("div",{className:G.wrapperUpload,children:[0===te.length&&(0,k.jsx)("p",{className:G.placeholder,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b..."}),(0,k.jsx)(h.Z,(0,a.Z)((0,a.Z)({className:G.upload},ye),{},{children:(0,k.jsx)(x.Z,{className:G.uploadBtn,children:"\u041e\u0431\u0437\u043e\u0440"})}))]})}),className:G.cardInfoResult}),body:(0,k.jsx)(Z.Z,{percent:C,format:function(e){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{className:G.progressTitle,children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}),(0,k.jsxs)("p",{className:G.progressValue,children:[e,"%"]})]})},className:G.cardInfoProgress}),footer:(0,k.jsxs)(g.Z,{direction:"vertical",size:13.5,className:G.cardInfoSpace,children:[(0,k.jsx)(e,{className:G.cardInfoTitle,children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,k.jsx)(m.Z.Item,{name:"description",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435!"}],className:G.formItem,children:(0,k.jsx)(n,{name:"description",className:G.cardInfoDescription,bordered:!1})})]})},cardSettings:{header:(0,k.jsx)("h2",{className:G.cardSettingsHeader,children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"}),body:(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(p.Z,{gutter:[21,8],children:[(0,k.jsx)(v.Z,{xs:24,sm:12,children:(0,k.jsx)(m.Z.Item,{label:"\u041c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c!"}],className:G.formItem,children:Y?(0,k.jsx)(u.Z,{className:G.input,value:re,onChange:function(e){return ae(e.target.value)}}):(0,k.jsx)(j.Z,{showSearch:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,k.jsx)(T.K,{}),className:G.select,onSelect:function(e,n){var r,a,i,l,t,s=R.find((function(e){return e.id===n.key}));J(null===s||void 0===s?void 0:s.id),Ze(null===s||void 0===s?void 0:s.colors),Pe(null===s||void 0===s||null===(r=s.categoryId)||void 0===r?void 0:r.name),ue({preview:null===s||void 0===s||null===(a=s.thumbnail)||void 0===a?void 0:a.path,size:null===s||void 0===s||null===(i=s.thumbnail)||void 0===i?void 0:i.size,name:null===s||void 0===s||null===(l=s.thumbnail)||void 0===l?void 0:l.originalname,type:null===s||void 0===s||null===(t=s.thumbnail)||void 0===t?void 0:t.mimetype}),O((function(){var e,n;return{name:null===s||void 0===s?void 0:s.name,categoryId:null===s||void 0===s||null===(e=s.categoryId)||void 0===e?void 0:e.id,colors:null===s||void 0===s?void 0:s.colors,priceMin:null===s||void 0===s?void 0:s.priceMin,priceMax:null===s||void 0===s?void 0:s.priceMax,description:null===s||void 0===s?void 0:s.description,thumbnail:null===s||void 0===s||null===(n=s.thumbnail)||void 0===n?void 0:n.originalname}}))},onClear:function(){J(null),Ze(ve),Pe(null),ue(null),ae(null),O({name:null,categoryId:null,colors:[],priceMin:null,priceMax:null,description:null,thumbnail:null})},allowClear:!0,children:(null===q||void 0===q?void 0:q.length)>0&&q.map((function(e){return(0,k.jsx)(j.Z.Option,{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))})})}),(0,k.jsx)(v.Z,{xs:24,sm:12,children:(0,k.jsx)(m.Z.Item,{label:"\u0422\u0438\u043f \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",name:"categoryId",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043f!"}],className:G.formItem,children:(0,k.jsx)(j.Z,{showSearch:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043f",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,k.jsx)(T.K,{}),className:G.select,allowClear:!0,onSelect:function(e,n){Pe(null===n||void 0===n?void 0:n.children)},children:(null===z||void 0===z?void 0:z.length)>0&&z.map((function(e){return(0,k.jsx)(j.Z.Option,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))})})}),(0,k.jsx)(v.Z,{xs:24,sm:12,children:(0,k.jsx)(m.Z.Item,{label:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0446\u0432\u0435\u0442\u0430",children:(0,k.jsx)(u.Z.Group,{className:G.inputGroup,children:(0,k.jsxs)(p.Z,{gutter:8,children:[(0,k.jsx)(v.Z,{flex:"auto",children:(0,k.jsx)(u.Z,{className:G.input,value:he,onChange:function(e){return pe(e.target.value)}})}),(0,k.jsx)(v.Z,{flex:"30px",children:(0,k.jsx)(x.Z,{icon:(0,k.jsx)(N.Z,{}),className:G.plusBtn,onClick:function(){return Ze([].concat((0,i.Z)(_e),[he]))}})})]})})})}),(0,k.jsx)(v.Z,{xs:0,sm:12}),(0,k.jsx)(v.Z,{xs:24,sm:12,children:(0,k.jsx)(m.Z.Item,{name:"colors",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0446\u0432\u0435\u0442!"}],className:G.formItem,children:(0,k.jsx)(I.Z.Group,{options:_e,className:G.checkboxGroup})})}),(0,k.jsx)(v.Z,{xs:0,sm:12}),(0,k.jsx)(v.Z,{xs:24,sm:12,children:(0,k.jsx)(m.Z.Item,{name:"priceMin",label:"\u041c\u0438\u043d. \u0446\u0435\u043d\u0430",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0438\u043d.\u0446\u0435\u043d\u0443!"}],className:G.formItem,children:(0,k.jsx)(b.Z,{className:G.inputNumber})})}),(0,k.jsx)(v.Z,{xs:24,sm:12,children:(0,k.jsx)(m.Z.Item,{name:"priceMax",label:"\u041c\u0430\u043a\u0441. \u0446\u0435\u043d\u0430",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0430\u043a\u0441.\u0446\u0435\u043d\u0443!"}],className:G.formItem,children:(0,k.jsx)(b.Z,{className:G.inputNumber})})}),(0,k.jsx)(v.Z,{xs:24,sm:12,children:(0,k.jsx)(m.Z.Item,{label:"\u041d\u043e\u0432\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430",className:G.formItem,children:(0,k.jsx)(I.Z,{className:G.checkbox,onChange:function(e){return $(e.target.checked)},children:"\u0414\u0430"})})})]})})}})})}},9538:function(e,n,r){e.exports=r.p+"static/media/noFoto.204ef07232dc7deae70c.jpg"}}]);
//# sourceMappingURL=390.0d678ef1.chunk.js.map