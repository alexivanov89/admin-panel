"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[107],{7844:function(e,n,r){r.d(n,{e:function(){return o}});var a=r(5485),i=r(4564),l=r(1333),t={container:"EditPage_container__H1Sxw",cardInfo:"EditPage_cardInfo__Z71iu",cardSettings:"EditPage_cardSettings__W+W15",cardInfoHeader:"EditPage_cardInfoHeader__Ivr+U",cardInfoBody:"EditPage_cardInfoBody__rmFw9",cardInfoFooter:"EditPage_cardInfoFooter__534lY",cardSettingsHeader:"EditPage_cardSettingsHeader__dGSpf",cardSettingsBody:"EditPage_cardSettingsBody__LEk2P",divider:"EditPage_divider__ZvXJM"},s=r(184),o=function(e){var n=e.title,r=e.cardInfo,o=e.cardSettings,c=e.buttons,d=a.Z.Title;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d,{className:t.title,children:n}),(0,s.jsxs)("div",{className:t.container,children:[(0,s.jsxs)(i.Z,{bordered:!1,className:t.cardInfo,children:[(0,s.jsx)(i.Z.Grid,{hoverable:!1,className:t.cardInfoHeader,children:r.header}),(0,s.jsx)(l.Z,{className:t.divider}),(0,s.jsx)(i.Z.Grid,{hoverable:!1,className:t.cardInfoBody,children:r.body}),(0,s.jsx)(l.Z,{className:t.divider}),(0,s.jsx)(i.Z.Grid,{hoverable:!1,className:t.cardInfoFooter,children:r.footer})]}),(0,s.jsxs)(i.Z,{bordered:!1,className:t.cardSettings,bodyStyle:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,s.jsx)(i.Z.Grid,{hoverable:!1,className:t.cardSettingsHeader,children:o.header}),(0,s.jsxs)(i.Z.Grid,{hoverable:!1,className:t.cardSettingsBody,children:[o.body,c]})]})]})]})}},7154:function(e,n,r){r.d(n,{E:function(){return c}});var a=r(1413),i=r(9439),l=r(5987),t=r(2791),s=r(184),o=["fallback","src","alt"],c=function(e){var n=e.fallback,r=e.src,c=e.alt,d=(0,l.Z)(e,o),u=(0,t.useState)(r),m=(0,i.Z)(u,2),f=m[0],h=m[1];(0,t.useEffect)((function(){h(r)}),[r]);return(0,s.jsx)("img",(0,a.Z)({src:f||n,alt:c,onError:function(){return h(n)}},d))}},3107:function(e,n,r){r.r(n),r.d(n,{default:function(){return M}});var a=r(1413),i=r(3433),l=r(5861),t=r(9439),s=r(7757),o=r.n(s),c=r(2791),d=r(6030),u=r(5485),m=r(9389),f=r(570),h=r(3695),p=r(8054),v=r(6106),g=r(914),x=r(3099),_=r(7309),Z=r(7063),j=r(8817),I=r(3734),b=r(2014),N=r(8243),P=r(7844),C=r(7154),S=r(9286),y=r(2784),E=r(9538),F=r(2311),B=r(8168),w={cardInfoResult:"CarEditPage_cardInfoResult__NEBgZ",carImage:"CarEditPage_carImage__bXBZU",wrapperUpload:"CarEditPage_wrapperUpload__ohFeG",uploadBtn:"CarEditPage_uploadBtn__zq+VV",placeholder:"CarEditPage_placeholder__hf652",upload:"CarEditPage_upload__SZ++d",cardInfoTitle:"CarEditPage_cardInfoTitle__+DJUc",cardInfoProgress:"CarEditPage_cardInfoProgress__Xkdad",progressTitle:"CarEditPage_progressTitle__AXUGR",progressValue:"CarEditPage_progressValue__W-ss4",cardInfoSpace:"CarEditPage_cardInfoSpace__skTY9",cardInfoDescription:"CarEditPage_cardInfoDescription__4QVky",cardSettingsHeader:"CarEditPage_cardSettingsHeader__n74d-",checkboxGroup:"CarEditPage_checkboxGroup__kbTU-",checkbox:"CarEditPage_checkbox__ae31p",input:"CarEditPage_input__ZGAWm",plusBtn:"CarEditPage_plusBtn__SWySq",inputNumber:"CarEditPage_inputNumber__tqEpt",select:"CarEditPage_select__ywb2r",form:"CarEditPage_form__R9cb2",saveBtn:"CarEditPage_saveBtn__Q1B-S",createBtn:"CarEditPage_createBtn__rrGni",cancelBtn:"CarEditPage_cancelBtn__9hsjS",deleteBtn:"CarEditPage_deleteBtn__WBnBi",groupBtnRight:"CarEditPage_groupBtnRight__9gSXy"},k=r(184),M=function(){var e=u.Z.Text,n=m.Z.TextArea,r=f.Z.useForm(),s=(0,t.Z)(r,1)[0],M=(0,d.I0)(),V=(0,d.v9)((function(e){return e.table})),G=V.category.categories,T=V.car.cars,R=T,L=G,q=(0,c.useState)(0),z=(0,t.Z)(q,2),U=z[0],H=z[1],A=(0,c.useState)({name:null,categoryId:null,colors:[],priceMin:null,priceMax:null,description:null,thumbnail:null}),D=(0,t.Z)(A,2),W=D[0],O=D[1],X=(0,c.useState)(null),J=(0,t.Z)(X,2),K=J[0],Q=J[1],Y=(0,c.useState)(!1),$=(0,t.Z)(Y,2),ee=$[0],ne=$[1],re=(0,c.useState)(null),ae=(0,t.Z)(re,2),ie=ae[0],le=ae[1],te=(0,c.useState)([]),se=(0,t.Z)(te,2),oe=se[0],ce=se[1],de=(0,c.useState)(null),ue=(0,t.Z)(de,2),me=ue[0],fe=ue[1],he=(0,c.useState)(null),pe=(0,t.Z)(he,2),ve=pe[0],ge=pe[1],xe=[{label:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439",value:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{label:"\u0411\u0435\u043b\u044b\u0439",value:"\u0411\u0435\u043b\u044b\u0439"},{label:"\u0427\u0435\u0440\u043d\u044b\u0439",value:"\u0427\u0435\u0440\u043d\u044b\u0439"}],_e=(0,c.useState)(xe),Ze=(0,t.Z)(_e,2),je=Ze[0],Ie=Ze[1],be=(0,c.useState)(null),Ne=(0,t.Z)(be,2),Pe=Ne[0],Ce=Ne[1],Se=function(e){return new Promise((function(n,r){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return n(a.result)},a.onerror=function(e){return r(e)}}))},ye=function(){var e=(0,l.Z)(o().mark((function e(n){var r,a,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.onSuccess,a=n.onError,i=n.file,n.onProgress,l=new FileReader,e.next=4,l.readAsDataURL(i);case 4:l.onload=function(){r(l.result)},l.onerror=function(e){return a(e)};case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ee={customRequest:function(e){return ye(e)},onRemove:function(e){ce((function(n){var r=n.indexOf(e),a=n.slice();return a.splice(r,1),fe(null),a}))},beforeUpload:function(e){var n=e.type.includes("image");return n||h.ZP.error("".concat(e.name," \u043d\u0435 img-\u0444\u0430\u0439\u043b.")),n||p.Z.LIST_IGNORE},onChange:function(){var e=(0,l.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.file.status,"done"!==n.file.status){e.next=10;break}if(n.file.url||n.file.preview){e.next=6;break}return e.next=5,Se(n.file.originFileObj);case 5:n.file.preview=e.sent;case 6:fe(n.file),h.ZP.success("".concat(n.file.name," \u0444\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d.")),e.next=11;break;case 10:"error"===n.file.status&&h.ZP.error("\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430 ".concat(n.file.name," \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430."));case 11:r=(r=(0,i.Z)(n.fileList)).slice(-1),ce(r);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fileList:oe};(0,c.useEffect)((function(){M((0,B.uT)()),M((0,B.LS)())}),[]);var Fe=(0,k.jsxs)(v.Z,{style:{paddingTop:16},children:[(0,k.jsx)(g.Z,{span:12,children:(0,k.jsx)(f.Z.Item,{children:(0,k.jsxs)(x.Z,{size:12.5,wrap:!0,children:[(0,k.jsx)(_.Z,{type:"primary",htmlType:"submit",className:w.saveBtn,disabled:!K||ee,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,k.jsx)(_.Z,{className:w.cancelBtn,onClick:function(){s.resetFields(),H(100)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})})}),(0,k.jsx)(g.Z,{span:12,className:w.groupBtnRight,children:(0,k.jsxs)(x.Z,{size:12.5,wrap:!0,children:[(0,k.jsx)(_.Z,{className:w.createBtn,onClick:function(){s.validateFields().then((function(e){var n={priceMin:s.getFieldValue("priceMin"),priceMax:s.getFieldValue("priceMax"),name:s.getFieldValue("name"),description:s.getFieldValue("description"),colors:s.getFieldValue("colors"),categoryId:G.find((function(e){return e.id===s.getFieldValue("categoryId")})),thumbnail:{path:null===me||void 0===me?void 0:me.preview,size:null===me||void 0===me?void 0:me.size,originalname:null===me||void 0===me?void 0:me.name,mimetype:null===me||void 0===me?void 0:me.type}};F.o.postCar(n).then((function(){s.resetFields()})).then((function(){h.ZP.success("\u041c\u0430\u0448\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430."),M((0,B.LS)())})).catch((function(){return h.ZP.error("\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043c\u0430\u0448\u0438\u043d\u044b  \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.")}))})).catch((function(e){}))},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),(0,k.jsx)(f.Z.Item,{children:(0,k.jsx)(_.Z,{className:w.deleteBtn,onClick:function(){s.validateFields().then((function(e){F.o.deleteCarById(K).then((function(){s.resetFields()})).then((function(){h.ZP.success("\u041c\u0430\u0448\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430."),Q(null),M((0,B.LS)())})).catch((function(){return h.ZP.error("\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043c\u0430\u0448\u0438\u043d\u044b  \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.")}))})).catch((function(e){}))},disabled:!K||ee,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})})]});return(0,c.useEffect)((function(){s.setFieldsValue(W)}),[W]),(0,k.jsx)(f.Z,{name:"form",layout:"vertical",initialValues:W,autoComplete:"off",requiredMark:!1,className:w.form,form:s,onFinish:function(){s.validateFields().then((function(e){var n={priceMin:s.getFieldValue("priceMin"),priceMax:s.getFieldValue("priceMax"),name:s.getFieldValue("name"),description:s.getFieldValue("description"),colors:s.getFieldValue("colors"),categoryId:G.find((function(e){return e.id===s.getFieldValue("categoryId")})),thumbnail:{path:null===me||void 0===me?void 0:me.preview,size:null===me||void 0===me?void 0:me.size,originalname:null===me||void 0===me?void 0:me.name,mimetype:null===me||void 0===me?void 0:me.type}};F.o.putCarById(K,n).then((function(){s.resetFields()})).then((function(){h.ZP.success("\u041c\u0430\u0448\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430."),M((0,B.LS)())})).catch((function(){return h.ZP.error("\u041f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043c\u0430\u0448\u0438\u043d\u044b  \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.")}))})).catch((function(e){}))},onFieldsChange:function(e,n){H(function(e){var n=e.length,r=e.filter((function(e){var n=e.value;return Array.isArray(n)?n.length>0:Boolean(n)})).length;return Math.round(100*r/n)}(n))},children:(0,k.jsx)(P.e,{title:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",buttons:Fe,cardInfo:{header:(0,k.jsx)(Z.ZP,{icon:(0,k.jsx)("div",{className:w.carImage,children:(0,k.jsx)(C.E,{src:null===me||void 0===me?void 0:me.preview,alt:null===me||void 0===me?void 0:me.name,fallback:E,loading:"lazy"})}),title:W.name||ie?W.name||ie:null,subTitle:Pe,extra:(0,k.jsx)(f.Z.Item,{name:"thumbnail",rules:[{required:!0,message:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435!"}],className:w.formItem,children:(0,k.jsxs)("div",{className:w.wrapperUpload,children:[0===oe.length&&(0,k.jsx)("p",{className:w.placeholder,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b..."}),(0,k.jsx)(p.Z,(0,a.Z)((0,a.Z)({className:w.upload},Ee),{},{children:(0,k.jsx)(_.Z,{className:w.uploadBtn,children:"\u041e\u0431\u0437\u043e\u0440"})}))]})}),className:w.cardInfoResult}),body:(0,k.jsx)(j.Z,{percent:U,format:function(e){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{className:w.progressTitle,children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}),(0,k.jsxs)("p",{className:w.progressValue,children:[e,"%"]})]})},className:w.cardInfoProgress}),footer:(0,k.jsxs)(x.Z,{direction:"vertical",size:13.5,className:w.cardInfoSpace,children:[(0,k.jsx)(e,{className:w.cardInfoTitle,children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,k.jsx)(f.Z.Item,{name:"description",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435!"}],className:w.formItem,children:(0,k.jsx)(n,{name:"description",className:w.cardInfoDescription,bordered:!1})})]})},cardSettings:{header:(0,k.jsx)("h2",{className:w.cardSettingsHeader,children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"}),body:(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(v.Z,{gutter:[21,8],children:[(0,k.jsx)(g.Z,{xs:24,sm:12,children:(0,k.jsx)(f.Z.Item,{label:"\u041c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c!"}],className:w.formItem,children:ee?(0,k.jsx)(m.Z,{className:w.input,value:ie,onChange:function(e){return le(e.target.value)}}):(0,k.jsx)(I.Z,{showSearch:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,k.jsx)(y.K,{}),className:w.select,onSelect:function(e,n){var r,a,i,l,t,s=T.find((function(e){return e.id===n.key}));Q(null===s||void 0===s?void 0:s.id),Ie(null===s||void 0===s?void 0:s.colors),Ce(null===s||void 0===s||null===(r=s.categoryId)||void 0===r?void 0:r.name),fe({preview:null===s||void 0===s||null===(a=s.thumbnail)||void 0===a?void 0:a.path,size:null===s||void 0===s||null===(i=s.thumbnail)||void 0===i?void 0:i.size,name:null===s||void 0===s||null===(l=s.thumbnail)||void 0===l?void 0:l.originalname,type:null===s||void 0===s||null===(t=s.thumbnail)||void 0===t?void 0:t.mimetype}),O((function(){var e,n;return{name:null===s||void 0===s?void 0:s.name,categoryId:null===s||void 0===s||null===(e=s.categoryId)||void 0===e?void 0:e.id,colors:null===s||void 0===s?void 0:s.colors,priceMin:null===s||void 0===s?void 0:s.priceMin,priceMax:null===s||void 0===s?void 0:s.priceMax,description:null===s||void 0===s?void 0:s.description,thumbnail:null===s||void 0===s||null===(n=s.thumbnail)||void 0===n?void 0:n.originalname}}))},onClear:function(){Q(null),Ie(xe),Ce(null),fe(null),le(null),O({name:null,categoryId:null,colors:[],priceMin:null,priceMax:null,description:null,thumbnail:null})},allowClear:!0,children:(null===R||void 0===R?void 0:R.length)>0&&R.map((function(e){return(0,k.jsx)(I.Z.Option,{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))})})}),(0,k.jsx)(g.Z,{xs:24,sm:12,children:(0,k.jsx)(f.Z.Item,{label:"\u0422\u0438\u043f \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",name:"categoryId",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043f!"}],className:w.formItem,children:(0,k.jsx)(I.Z,{showSearch:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043f",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,k.jsx)(y.K,{}),className:w.select,allowClear:!0,onSelect:function(e,n){Ce(null===n||void 0===n?void 0:n.children)},children:(null===L||void 0===L?void 0:L.length)>0&&L.map((function(e){return(0,k.jsx)(I.Z.Option,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))})})}),(0,k.jsx)(g.Z,{xs:24,sm:12,children:(0,k.jsx)(f.Z.Item,{label:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0446\u0432\u0435\u0442\u0430",children:(0,k.jsx)(m.Z.Group,{className:w.inputGroup,children:(0,k.jsxs)(v.Z,{gutter:8,children:[(0,k.jsx)(g.Z,{flex:"auto",children:(0,k.jsx)(m.Z,{className:w.input,value:ve,onChange:function(e){return ge(e.target.value)}})}),(0,k.jsx)(g.Z,{flex:"30px",children:(0,k.jsx)(_.Z,{icon:(0,k.jsx)(S.Z,{}),disabled:!Boolean(ve),className:w.plusBtn,onClick:function(){return Ie([].concat((0,i.Z)(je),[ve]))}})})]})})})}),(0,k.jsx)(g.Z,{xs:0,sm:12}),(0,k.jsx)(g.Z,{xs:24,sm:12,children:(0,k.jsx)(f.Z.Item,{name:"colors",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0446\u0432\u0435\u0442!"}],className:w.formItem,children:(0,k.jsx)(b.Z.Group,{options:je,className:w.checkboxGroup})})}),(0,k.jsx)(g.Z,{xs:0,sm:12}),(0,k.jsx)(g.Z,{xs:24,sm:12,children:(0,k.jsx)(f.Z.Item,{name:"priceMin",label:"\u041c\u0438\u043d. \u0446\u0435\u043d\u0430",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0438\u043d.\u0446\u0435\u043d\u0443!"}],className:w.formItem,children:(0,k.jsx)(N.Z,{min:1,className:w.inputNumber})})}),(0,k.jsx)(g.Z,{xs:24,sm:12,children:(0,k.jsx)(f.Z.Item,{name:"priceMax",label:"\u041c\u0430\u043a\u0441. \u0446\u0435\u043d\u0430",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0430\u043a\u0441.\u0446\u0435\u043d\u0443!"}],className:w.formItem,children:(0,k.jsx)(N.Z,{min:1,className:w.inputNumber})})}),(0,k.jsx)(g.Z,{xs:24,sm:12,children:(0,k.jsx)(f.Z.Item,{label:"\u041d\u043e\u0432\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430",className:w.formItem,children:(0,k.jsx)(b.Z,{className:w.checkbox,onChange:function(e){return ne(e.target.checked)},children:"\u0414\u0430"})})})]})})}})})}},9538:function(e,n,r){e.exports=r.p+"static/media/noFoto.204ef07232dc7deae70c.jpg"}}]);
//# sourceMappingURL=107.ec6ff061.chunk.js.map