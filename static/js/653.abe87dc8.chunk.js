"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[653],{5213:function(e,n,t){t.d(n,{y:function(){return V}});var i=t(1413),r=t(5485),a=t(4564),l=t(6106),c=t(570),o=t(914),s=t(3099),d=t(3433),u=t(5861),f=t(9439),p=t(5987),h=t(7757),x=t.n(h),v=t(8243),m=t(3734),y=t(9389),Z=t(6038),j=t(6440),b=t(2791),I=t(6030),g=t(2784),w=t(823),C="EditableTable_table__66N+3",k="EditableTable_editableRow__XinJa",_="EditableTable_select__jmscw",S=t(184),T=["editing","dataIndex","title","inputType","record","index","children"],L=["onSave","onDelete","dataSource","columns"],F=function(e){var n=e.editing,t=e.dataIndex,r=e.title,a=e.inputType,l=(e.record,e.index,e.children),o=(0,p.Z)(e,T),s=(0,I.v9)((function(e){return e.table})),d=s.rateType.rateTypes,u=s.city.cities,f=d,h=u;return(0,S.jsx)("td",(0,i.Z)((0,i.Z)({},o),{},{children:n?(0,S.jsx)(c.Z.Item,{name:t,style:{margin:0,padding:0},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(r,"!")}],children:function(e){switch(e){case"number":return(0,S.jsx)(v.Z,{});case"selectRateTypeId":return(0,S.jsx)(m.Z,{showSearch:!0,placeholder:"\u0422\u0438\u043f \u0442\u0430\u0440\u0438\u0444\u0430",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,S.jsx)(g.K,{}),className:_,optionLabelProp:"label",allowClear:!0,children:(null===f||void 0===f?void 0:f.length)>0&&f.map((function(e){return(0,S.jsx)(m.Z.Option,{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))});case"selectCityId":return(0,S.jsx)(m.Z,{showSearch:!0,placeholder:"\u0433\u043e\u0440\u043e\u0434",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,S.jsx)(g.K,{}),className:_,optionLabelProp:"label",allowClear:!0,children:(null===h||void 0===h?void 0:h.length)>0&&h.map((function(e){return(0,S.jsx)(m.Z.Option,{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))});default:return(0,S.jsx)(y.Z,{})}}(a)}):l}))},P=function(e){var n=e.onSave,t=e.onDelete,a=e.dataSource,l=e.columns,o=(0,p.Z)(e,L),s=c.Z.useForm(),h=(0,f.Z)(s,1)[0],v=(0,b.useState)(""),m=(0,f.Z)(v,2),y=m[0],g=m[1],_=(0,I.v9)((function(e){return e.table})),T=_.rateType.rateTypes,P=_.city.cities,N=(0,I.I0)(),B=function(e){return e.key===y},E=function(){g("")},O=function(){var e=(0,u.Z)(x().mark((function e(t){var i,r,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.validateFields();case 3:if(i=e.sent,!Object.keys(i).includes("rateTypeId")){e.next=11;break}return r={price:h.getFieldValue("price"),rateTypeId:T.find((function(e){return e.id===h.getFieldValue("rateTypeId")}))},e.next=8,n(t,r);case 8:g(""),e.next=21;break;case 11:if(!Object.keys(i).includes("cityId")){e.next=18;break}return a={name:h.getFieldValue("name"),address:h.getFieldValue("address"),cityId:P.find((function(e){return e.id===h.getFieldValue("cityId")}))},e.next=15,n(t,a);case 15:g(""),e.next=21;break;case 18:return e.next=20,n(t,i);case 20:g("");case 21:e.next=28;break;case 23:throw e.prev=23,e.t0=e.catch(0),N((0,w.Bv)(!0)),N((0,w.fZ)(e.t0.response.status)),new Error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=(0,u.Z)(x().mark((function e(n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),z=[].concat((0,d.Z)(l),[{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",dataIndex:"operation1",width:"150px",render:function(e,n){return B(n)?(0,S.jsxs)("span",{children:[(0,S.jsx)(r.Z.Link,{onClick:function(){return O(n.key)},style:{marginRight:8,color:"#818ea3"},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,S.jsx)(Z.Z,{title:"\u0423\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c?",onConfirm:E,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:(0,S.jsx)("a",{children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}):(0,S.jsx)(r.Z.Link,{disabled:""!==y,onClick:function(){return function(e){h.setFieldsValue((0,i.Z)({name:""},e)),g(e.key)}(n)},style:{color:"#818ea3"},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",dataIndex:"operation2",render:function(e,n){return(0,S.jsx)(Z.Z,{title:"\u0423\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0423\u0434\u0430\u043b\u0438\u0442\u044c?",onConfirm:function(){return V(n.key)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:(0,S.jsx)("a",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})}}]),R=function(e){switch(e){case"rateTypeId":return"selectRateTypeId";case"cityId":return"selectCityId";case"price":return"number";default:return"text"}},K=z.map((function(e){return e.editable?(0,i.Z)((0,i.Z)({},e),{},{onCell:function(n){return{record:n,inputType:R(e.dataIndex),dataIndex:e.dataIndex,title:e.title,editing:B(n)}}}):e}));return(0,S.jsx)(c.Z,{form:h,component:!1,children:(0,S.jsx)(j.Z,(0,i.Z)({className:C,components:{body:{cell:F}},dataSource:a,columns:K,rowClassName:k},o))})},N="Table_table__y43+-",B=function(e){return(0,S.jsx)(j.Z,(0,i.Z)({className:N},e))},E="ListEntities_title__KL5RP",O="ListEntities_card__iz-Y6",V=function(e){var n=r.Z.Title,t=e.title,d=e.form,u=e.tableProps,f=e.isEditable,p=void 0!==f&&f,h=d.onChange,x=d.fields,v=d.filters,m=d.buttons;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(n,{className:E,children:t}),(0,S.jsx)(a.Z,{title:(0,S.jsx)(l.Z,{children:(0,S.jsxs)(c.Z,{name:"filters",layout:"inline",style:{width:"100%"},fields:x,onFieldsChange:function(e,n){h(n)},requiredMark:"optional",children:[(0,S.jsx)(o.Z,{xs:12,sm:14,children:(0,S.jsx)(s.Z,{size:[15,15],wrap:!0,style:{width:"100%"},children:v})}),(0,S.jsx)(o.Z,{xs:12,sm:10,style:{display:"flex",justifyContent:"flex-end"},children:(0,S.jsx)(s.Z,{size:[15,15],wrap:!0,children:m})})]})}),bordered:!1,className:O,bodyStyle:{padding:"1px 0px 0px"},children:p?(0,S.jsx)(P,(0,i.Z)({},u)):(0,S.jsx)(B,(0,i.Z)({},u))})]})}},7137:function(e,n,t){t.d(n,{u:function(){return a}});t(2791);var i=t(8757),r=t(184),a=function(e){var n=e.children,t=e.isModalVisible,a=e.title,l=e.handleOk,c=e.handleCancel;return(0,r.jsx)(i.Z,{cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",title:a,visible:t,onOk:l,onCancel:c,children:n})}},9653:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var i=t(5861),r=t(1413),a=t(9439),l=t(7757),c=t.n(l),o=t(2791),s=t(3734),d=t(570),u=t(7309),f=t(9389),p=t(6030),h=t(5213),x=t(7137),v=t(2784),m=t(8168),y=t(6623),Z=t(2311),j={carImage:"ListPoints_carImage__gzJoS",select:"ListPoints_select__OoxZn",addBtn:"ListPoints_addBtn__86gys",filterBtn:"ListPoints_filterBtn__aTm22",resetBtn:"ListPoints_resetBtn__lBTEE"},b=t(184),I=function(){var e=s.Z.Option,n=(0,p.I0)(),t=(0,p.v9)((function(e){return e.table})),l=t.point,I=t.city.cities,g=l.points,w=l.loading,C=(l.count,l.fields),k=(0,o.useState)(1),_=(0,a.Z)(k,2),S=_[0],T=_[1],L=(0,o.useState)(5),F=(0,a.Z)(L,2),P=F[0],N=(F[1],d.Z.useForm()),B=(0,a.Z)(N,1)[0],E=(0,o.useState)(!1),O=(0,a.Z)(E,2),V=O[0],z=O[1],R=[{name:["city"],value:null}],K=(0,o.useState)(R),M=(0,a.Z)(K,2),q=M[0],D=M[1],J=I;(0,o.useEffect)((function(){n((0,m.d2)()),n((0,m.LC)())}),[]);var Y=g.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{key:e.id})})),A=C.map((function(e){switch(e){case"address":return{title:"\u0410\u0434\u0440\u0435\u0441",dataIndex:e,key:e,editable:!0,width:"200px"};case"cityId":return{title:"\u0413\u043e\u0440\u043e\u0434",dataIndex:e,key:e,editable:!0,width:"150px",render:function(e){return(0,b.jsx)(b.Fragment,{children:null===e||void 0===e?void 0:e.name})}};case"name":return{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u043d\u043a\u0442\u0430",dataIndex:e,key:e,editable:!0,width:"200px"};default:return{title:e,dataIndex:e,key:e}}})),H=(0,b.jsx)(d.Z.Item,{name:"city",style:{margin:"0px 0px 0px 2px"},children:(0,b.jsx)(s.Z,{showSearch:!0,placeholder:"\u0413\u043e\u0440\u043e\u0434",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,b.jsx)(v.K,{}),className:j.select,children:(null===J||void 0===J?void 0:J.length)>0&&J.map((function(n){return(0,b.jsx)(e,{value:null===n||void 0===n?void 0:n.id,children:null===n||void 0===n?void 0:n.name},null===n||void 0===n?void 0:n.id)}))})}),X=(0,o.useCallback)((function(){D(R),n((0,m.d2)())}),[]),$=(0,o.useCallback)((function(){n((0,m.d2)((0,y.j)(q)))}),[q]),G=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z.Item,{style:{margin:0},children:(0,b.jsx)(u.Z,{className:j.addBtn,onClick:function(){z(!0)},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}),(0,b.jsx)(d.Z.Item,{style:{margin:0},children:(0,b.jsx)(u.Z,{className:j.resetBtn,onClick:X,children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})}),(0,b.jsx)(d.Z.Item,{style:{margin:0},children:(0,b.jsx)(u.Z,{type:"primary",htmlType:"submit",className:j.filterBtn,onClick:$,children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Q=function(){var e=(0,i.Z)(c().mark((function e(t,i){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.o.putPointById(t,i);case 2:n((0,m.d2)());case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),U=function(){var e=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.o.deletePointById(t);case 2:n((0,m.d2)());case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.y,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u043d\u043a\u0442\u043e\u0432",form:{fields:q,onChange:function(e){D(e)},filters:H,buttons:G},tableProps:{pagination:{position:["bottomCenter"],current:S,pageSize:P,onChange:function(e){T(e)},itemRender:function(e,n,t){return"prev"===n?(0,b.jsx)(u.Z,{icon:(0,b.jsx)(v.gY,{})}):"next"===n?(0,b.jsx)(u.Z,{icon:(0,b.jsx)(v.Ne,{})}):t},showSizeChanger:!1},showHeader:!0,columns:A,dataSource:Y,loading:w,scroll:{x:550},onSave:Q,onDelete:U},isEditable:!0}),(0,b.jsx)(x.u,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438",isModalVisible:V,handleOk:function(){B.validateFields().then((function(e){null===e||void 0===e||e.name,null===e||void 0===e||e.address,I.find((function(n){return n.id===(null===e||void 0===e?void 0:e.cityId)}));Z.o.postPoint(e),B.resetFields()})).then((function(){n((0,m.d2)()),z(!1)})).catch((function(e){}))},handleCancel:function(){z(!1)},children:(0,b.jsxs)(d.Z,{form:B,layout:"vertical",name:"formCreateEntitie",initialValues:{name:null,address:null},children:[(0,b.jsx)(d.Z.Item,{name:"name",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:(0,b.jsx)(f.Z,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",className:j.input})}),(0,b.jsx)(d.Z.Item,{name:"address",label:"\u0410\u0434\u0440\u0435\u0441",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441!"}],children:(0,b.jsx)(f.Z,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",className:j.input})}),(0,b.jsx)(d.Z.Item,{name:"cityId",label:"\u0413\u043e\u0440\u043e\u0434",children:(0,b.jsx)(s.Z,{showSearch:!0,placeholder:"\u0413\u043e\u0440\u043e\u0434",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,b.jsx)(v.K,{}),className:j.selectCreatePoint,children:(null===J||void 0===J?void 0:J.length)>0&&J.map((function(n){return(0,b.jsx)(e,{value:null===n||void 0===n?void 0:n.id,children:null===n||void 0===n?void 0:n.name},null===n||void 0===n?void 0:n.id)}))})})]})})]})}},6623:function(e,n,t){t.d(n,{j:function(){return i}});var i=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t;switch(n.name[0]){case"tank":return n.value?e+"tank".concat(n.value,"&"):e+"";case"city":return n.value?e+"cityId[id]=".concat(n.value,"&"):e+"";case"category":return n.value?e+"categoryId[id]=".concat(n.value,"&"):e+"";case"period":var i;return null!==n&&void 0!==n&&null!==(t=n.value)&&void 0!==t&&t.value?e+"createdAt[$gt]=".concat(null===n||void 0===n||null===(i=n.value)||void 0===i?void 0:i.value,"&"):e+"";case"nameCar":return n.value?e+"name=".concat(n.value,"&"):e+"";case"car":return n.value?e+"carId[id]=".concat(n.value,"&"):e+"";case"orderStatus":return n.value?e+"orderStatusId[id]=".concat(n.value,"&"):e+"";case"priceMin":return n.value?e+"priceMin".concat(n.value,"&"):e+"";case"rateType":return n.value?e+"rateTypeId[id]=".concat(n.value):e+"";default:return n.value?e+"".concat(n.name,"=").concat(n.value,"&"):e+""}}),"?")}}}]);
//# sourceMappingURL=653.abe87dc8.chunk.js.map