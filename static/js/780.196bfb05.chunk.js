"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[780],{5213:function(e,n,t){t.d(n,{y:function(){return M}});var r=t(1413),a=t(5485),i=t(4564),l=t(6106),c=t(570),o=t(914),d=t(3099),u=t(3433),s=t(5861),f=t(9439),x=t(5987),h=t(7757),p=t.n(h),m=t(8243),v=t(3734),j=t(9389),y=t(6038),Z=t(3465),g=t(2791),C=t(6030),b=t(2784),I=t(823),w="EditableTable_table__66N+3",k="EditableTable_editableRow__XinJa",_="EditableTable_select__jmscw",L=t(184),S=["editing","dataIndex","title","inputType","record","index","children"],F=["onSave","onDelete","dataSource","columns"],T=function(e){var n=e.editing,t=e.dataIndex,a=e.title,i=e.inputType,l=(e.record,e.index,e.children),o=(0,x.Z)(e,S),d=(0,C.v9)((function(e){return e.table})),u=d.rateType.rateTypes,s=d.city.cities,f=u,h=s;return(0,L.jsx)("td",(0,r.Z)((0,r.Z)({},o),{},{children:n?(0,L.jsx)(c.Z.Item,{name:t,style:{margin:0,padding:0},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(a,"!")}],children:function(e){switch(e){case"number":return(0,L.jsx)(m.Z,{});case"selectRateTypeId":return(0,L.jsx)(v.Z,{showSearch:!0,placeholder:"\u0422\u0438\u043f \u0442\u0430\u0440\u0438\u0444\u0430",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,L.jsx)(b.K,{}),className:_,optionLabelProp:"label",allowClear:!0,children:(null===f||void 0===f?void 0:f.length)>0&&f.map((function(e){return(0,L.jsx)(v.Z.Option,{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))});case"selectCityId":return(0,L.jsx)(v.Z,{showSearch:!0,placeholder:"\u0433\u043e\u0440\u043e\u0434",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,L.jsx)(b.K,{}),className:_,optionLabelProp:"label",allowClear:!0,children:(null===h||void 0===h?void 0:h.length)>0&&h.map((function(e){return(0,L.jsx)(v.Z.Option,{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))});default:return(0,L.jsx)(j.Z,{})}}(i)}):l}))},N=function(e){var n=e.onSave,t=e.onDelete,i=e.dataSource,l=e.columns,o=(0,x.Z)(e,F),d=c.Z.useForm(),h=(0,f.Z)(d,1)[0],m=(0,g.useState)(""),v=(0,f.Z)(m,2),j=v[0],b=v[1],_=(0,C.v9)((function(e){return e.table})),S=_.rateType.rateTypes,N=_.city.cities,E=(0,C.I0)(),O=function(e){return e.key===j},P=function(){b("")},K=function(){var e=(0,s.Z)(p().mark((function e(t){var r,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.validateFields();case 3:if(r=e.sent,!Object.keys(r).includes("rateTypeId")){e.next=11;break}return a={price:h.getFieldValue("price"),rateTypeId:S.find((function(e){return e.id===h.getFieldValue("rateTypeId")}))},e.next=8,n(t,a);case 8:b(""),e.next=21;break;case 11:if(!Object.keys(r).includes("cityId")){e.next=18;break}return i={name:h.getFieldValue("name"),address:h.getFieldValue("address"),cityId:N.find((function(e){return e.id===h.getFieldValue("cityId")}))},e.next=15,n(t,i);case 15:b(""),e.next=21;break;case 18:return e.next=20,n(t,r);case 20:b("");case 21:e.next=28;break;case 23:throw e.prev=23,e.t0=e.catch(0),E((0,I.Bv)(!0)),E((0,I.fZ)(e.t0.response.status)),new Error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=(0,s.Z)(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),z=[].concat((0,u.Z)(l),[{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",dataIndex:"operation1",width:"150px",render:function(e,n){return O(n)?(0,L.jsxs)("span",{children:[(0,L.jsx)(a.Z.Link,{onClick:function(){return K(n.key)},style:{marginRight:8,color:"#818ea3"},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,L.jsx)(y.Z,{title:"\u0423\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c?",onConfirm:P,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:(0,L.jsx)("a",{children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}):(0,L.jsx)(a.Z.Link,{disabled:""!==j,onClick:function(){return function(e){h.setFieldsValue((0,r.Z)({name:""},e)),b(e.key)}(n)},style:{color:"#818ea3"},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",dataIndex:"operation2",render:function(e,n){return(0,L.jsx)(y.Z,{title:"\u0423\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0423\u0434\u0430\u043b\u0438\u0442\u044c?",onConfirm:function(){return M(n.key)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:(0,L.jsx)("a",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})}}]),B=function(e){switch(e){case"rateTypeId":return"selectRateTypeId";case"cityId":return"selectCityId";case"price":return"number";default:return"text"}},R=z.map((function(e){return e.editable?(0,r.Z)((0,r.Z)({},e),{},{onCell:function(n){return{record:n,inputType:B(e.dataIndex),dataIndex:e.dataIndex,title:e.title,editing:O(n)}}}):e}));return(0,L.jsx)(c.Z,{form:h,component:!1,children:(0,L.jsx)(Z.Z,(0,r.Z)({className:w,components:{body:{cell:T}},dataSource:i,columns:R,rowClassName:k},o))})},E="Table_table__y43+-",O=function(e){return(0,L.jsx)(Z.Z,(0,r.Z)({className:E},e))},P="ListEntities_title__KL5RP",K="ListEntities_card__iz-Y6",M=function(e){var n=a.Z.Title,t=e.title,u=e.form,s=e.tableProps,f=e.isEditable,x=void 0!==f&&f,h=u.onChange,p=u.fields,m=u.filters,v=u.buttons;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(n,{className:P,children:t}),(0,L.jsx)(i.Z,{title:(0,L.jsx)(l.Z,{children:(0,L.jsxs)(c.Z,{name:"filters",layout:"inline",style:{width:"100%"},fields:p,onFieldsChange:function(e,n){h(n)},requiredMark:"optional",children:[(0,L.jsx)(o.Z,{xs:12,sm:14,children:(0,L.jsx)(d.Z,{size:[15,15],wrap:!0,style:{width:"100%"},children:m})}),(0,L.jsx)(o.Z,{xs:12,sm:10,style:{display:"flex",justifyContent:"flex-end"},children:(0,L.jsx)(d.Z,{size:[15,15],wrap:!0,children:v})})]})}),bordered:!1,className:K,bodyStyle:{padding:"1px 0px 0px"},children:x?(0,L.jsx)(N,(0,r.Z)({},s)):(0,L.jsx)(O,(0,r.Z)({},s))})]})}},7154:function(e,n,t){t.d(n,{E:function(){return d}});var r=t(1413),a=t(9439),i=t(5987),l=t(2791),c=t(184),o=["fallback","src","alt"],d=function(e){var n=e.fallback,t=e.src,d=e.alt,u=(0,i.Z)(e,o),s=(0,l.useState)(t),f=(0,a.Z)(s,2),x=f[0],h=f[1];(0,l.useEffect)((function(){h(t)}),[t]);return(0,c.jsx)("img",(0,r.Z)({src:x||n,alt:d,onError:function(){return h(n)}},u))}},5780:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(1413),a=t(5987),i=t(9439),l=t(2791),c=t(3734),o=t(7309),d=t(570),u=t(6030),s=t(5213),f=t(7154),x=t(9538),h=t(2784),p=t(8168),m=t(8785),v=t(5369),j=t(6623),y="ListCars_carImage__MY8yK",Z="ListCars_select__Lu7CY",g="ListCars_addBtn__uayeF",C="ListCars_filterBtn__Uweiy",b="ListCars_resetBtn__fk1G-",I=t(184),w=["name"],k=function(){var e=c.Z.Option,n=(0,u.I0)(),t=(0,u.v9)((function(e){return e.table})),k=t.car,_=t.category.categories,L=k.cars,S=k.loading,F=(k.count,k.fields),T=(0,l.useState)(1),N=(0,i.Z)(T,2),E=N[0],O=N[1],P=(0,l.useState)(5),K=(0,i.Z)(P,2),M=K[0],z=(K[1],[{name:["nameCar"],value:null},{name:["category"],value:null},{name:["tank"],value:null},{name:["priceMin"],value:null}]),B=(0,l.useState)(z),R=(0,i.Z)(B,2),V=R[0],$=R[1],Y=_,q=Array.from(new Set(L.map((function(e){var n=e.name;(0,a.Z)(e,w);return n})).filter(Boolean)));(0,l.useEffect)((function(){n((0,p.LS)()),n((0,p.uT)())}),[]);var A=L.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{key:e.id})})),D=F.map((function(e){switch(e){case"priceMin":return{title:"\u0426\u0435\u043d\u0430 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f",dataIndex:e,key:e,editable:!0,render:function(e){return e?(0,I.jsx)(I.Fragment,{children:"".concat((0,v._)(e)," \u20bd")}):null}};case"priceMax":return{title:"\u0426\u0435\u043d\u0430 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f",dataIndex:e,key:e,editable:!0,render:function(e){return e?(0,I.jsx)(I.Fragment,{children:"".concat((0,v._)(e)," \u20bd")}):null}};case"name":return{title:"\u041c\u0430\u0440\u043a\u0430",dataIndex:e,key:e,render:function(e){return e?(0,I.jsx)(I.Fragment,{children:e}):null}};case"thumbnail":return{title:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",dataIndex:e,key:null===e||void 0===e?void 0:e.name,render:function(e){return(0,I.jsx)("div",{className:y,children:(0,I.jsx)(f.E,{src:null===e||void 0===e?void 0:e.path,alt:null===e||void 0===e?void 0:e.originalname,fallback:x,loading:"lazy"})})}};case"description":return{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:e,key:e,render:function(e){return e?(0,I.jsx)(I.Fragment,{children:e}):null}};case"categoryId":return{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",dataIndex:e,key:null===e||void 0===e?void 0:e.name,render:function(e){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("p",{children:null===e||void 0===e?void 0:e.name}),(0,I.jsx)("p",{children:null===e||void 0===e?void 0:e.description})]})}};case"colors":return{title:"\u0426\u0432\u0435\u0442\u0430 \u0430\u0432\u0442\u043e",dataIndex:e,key:null===e||void 0===e?void 0:e.name,render:function(e){return null===e||void 0===e?void 0:e.map((function(e){return(0,I.jsx)("p",{children:e},(0,m.x0)())}))}};case"tank":return{title:"\u0422\u043e\u043f\u043b\u0438\u0432\u043e",dataIndex:e,key:e,editable:!0,render:function(e){return e?(0,I.jsx)(I.Fragment,{children:"".concat(e,"%")}):null}};case"number":return{title:"\u041d\u043e\u043c\u0435\u0440 \u043c\u0430\u0448\u0438\u043d\u044b",dataIndex:e,key:e,editable:!0,render:function(e){return e?(0,I.jsx)(I.Fragment,{children:e}):null}};default:return{title:e,dataIndex:e,key:e,render:function(e){return e?(0,I.jsx)(I.Fragment,{children:e}):null}}}})),G=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.Z.Item,{name:"nameCar",style:{margin:"0px 0px 0px 2px"},children:(0,I.jsx)(c.Z,{showSearch:!0,placeholder:"\u041c\u0430\u0440\u043a\u0430",optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,I.jsx)(h.K,{}),className:Z,children:(null===q||void 0===q?void 0:q.length)>0&&q.map((function(n){return(0,I.jsx)(e,{value:n,children:n},(0,m.x0)())}))})}),(0,I.jsx)(d.Z.Item,{name:"category",style:{margin:0},children:(0,I.jsx)(c.Z,{showSearch:!0,placeholder:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionFilterProp:"children",filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,I.jsx)(h.K,{}),className:Z,children:(null===Y||void 0===Y?void 0:Y.length)>0&&Y.map((function(n){return(0,I.jsx)(e,{value:null===n||void 0===n?void 0:n.id,children:null===n||void 0===n?void 0:n.name},null===n||void 0===n?void 0:n.id)}))})}),(0,I.jsx)(d.Z.Item,{name:"tank",style:{margin:0},children:(0,I.jsxs)(c.Z,{showSearch:!0,placeholder:"\u0422\u043e\u043f\u043b\u0438\u0432\u043e",optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,I.jsx)(h.K,{}),className:Z,children:[(0,I.jsx)(e,{value:"[$gt]=50",children:"\u0431\u043e\u043b\u044c\u0448\u0435 50%"}),(0,I.jsx)(e,{value:"[$lt]=50",children:"\u043c\u0435\u043d\u044c\u0448\u0435 50%"})]})}),(0,I.jsx)(d.Z.Item,{name:"priceMin",style:{margin:0},children:(0,I.jsxs)(c.Z,{showSearch:!0,placeholder:"\u0426\u0435\u043d\u0430 \u043c\u0438\u043d",optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},suffixIcon:(0,I.jsx)(h.K,{}),className:Z,children:[(0,I.jsx)(e,{value:"[$gt]=10000",children:"\u0431\u043e\u043b\u044c\u0448\u0435 10 \u0442\u044b\u0441"}),(0,I.jsx)(e,{value:"[$lt]=10000",children:"\u043c\u0435\u043d\u044c\u0448\u0435 10 \u0442\u044b\u0441"})]})})]}),H=(0,l.useCallback)((function(){$(z),n((0,p.LS)())}),[]),J=(0,l.useCallback)((function(){n((0,p.LS)((0,j.j)(V)))}),[V]),U=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.Z.Item,{style:{margin:0},children:(0,I.jsx)(o.Z,{className:g,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}),(0,I.jsx)(d.Z.Item,{style:{margin:0},children:(0,I.jsx)(o.Z,{className:b,onClick:H,children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})}),(0,I.jsx)(d.Z.Item,{style:{margin:0},children:(0,I.jsx)(o.Z,{type:"primary",htmlType:"submit",className:C,onClick:J,children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})})]});return(0,I.jsx)(s.y,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u0432\u0442\u043e",form:{fields:V,onChange:function(e){$(e)},filters:G,buttons:U},tableProps:{pagination:{position:["bottomCenter"],current:E,pageSize:M,onChange:function(e){O(e)},itemRender:function(e,n,t){return"prev"===n?(0,I.jsx)(o.Z,{icon:(0,I.jsx)(h.gY,{})}):"next"===n?(0,I.jsx)(o.Z,{icon:(0,I.jsx)(h.Ne,{})}):t},showSizeChanger:!1},showHeader:!0,columns:D,dataSource:A,loading:S,scroll:{x:980}}})}},6623:function(e,n,t){t.d(n,{j:function(){return r}});var r=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t;switch(n.name[0]){case"tank":return n.value?e+"tank".concat(n.value,"&"):e+"";case"city":return n.value?e+"cityId[id]=".concat(n.value,"&"):e+"";case"category":return n.value?e+"categoryId[id]=".concat(n.value,"&"):e+"";case"period":var r;return null!==n&&void 0!==n&&null!==(t=n.value)&&void 0!==t&&t.value?e+"createdAt[$gt]=".concat(null===n||void 0===n||null===(r=n.value)||void 0===r?void 0:r.value,"&"):e+"";case"nameCar":return n.value?e+"name=".concat(n.value,"&"):e+"";case"car":return n.value?e+"carId[id]=".concat(n.value,"&"):e+"";case"orderStatus":return n.value?e+"orderStatusId[id]=".concat(n.value,"&"):e+"";case"priceMin":return n.value?e+"priceMin".concat(n.value,"&"):e+"";case"rateType":return n.value?e+"rateTypeId[id]=".concat(n.value):e+"";default:return n.value?e+"".concat(n.name,"=").concat(n.value,"&"):e+""}}),"?")}},5369:function(e,n,t){t.d(n,{_:function(){return r}});var r=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):null}},9538:function(e,n,t){e.exports=t.p+"static/media/noFoto.204ef07232dc7deae70c.jpg"}}]);
//# sourceMappingURL=780.196bfb05.chunk.js.map